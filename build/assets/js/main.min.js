function closeAppliedForm(){var e=document.getElementById("closeAppliedForm"),t=document.getElementById("closeAppliedFormButton");e.addEventListener("click",function(){darkLayer.classList.toggle("js--hidden")}),t.addEventListener("click",function(){darkLayer.classList.toggle("js--hidden")})}function inputAuthorization(){document.querySelectorAll(".form-input").forEach(function(e){var t;e.value||(t=addWarningEmptySpan(),e.classList.add("form-input--warning"),e=e.id,document.querySelector("[for=".concat(e,"]")).appendChild(t))})}function addWarningEmptySpan(){var e=document.createElement("span");return e.classList.add("empty--input"),e}function deleteWarningSpans(){document.querySelectorAll(".form-input").forEach(function(t){t.addEventListener("input",function(){var e=t.id,e=document.querySelector("[for=".concat(e,"]"));e.querySelector(".empty--input")&&(e.querySelector(".empty--input").remove(),t.classList.remove("form-input--warning"))})})}$(function(){$("#applyForm").on("submit",function(e){e.preventDefault();var e=$("#userName").val(),t=$("#userPhone").val(),n=$("#userCompany").val(),a=$("#userArea").val();$.ajax({type:"post",url:"/wp-admin/admin-ajax.php",data:{action:"ajax_form",name:e,phone:t,company:n,area:a},success:function(e){$(".dark-layer").html(e),closeAppliedForm()}})})}),$(".form-button").on("click",function(){inputAuthorization()}),deleteWarningSpans();var commentTextarea,commentTextareaSymbolCounter,maxValue,parentFilterContainer,filerDarkLayer,filterContainer,closeFilterButton,openFilterButton,setTableButton,setGridButton,layoutTable,layoutGrid,wrapperZoom=document.querySelector(".wrapperZoom"),initZoom=1;function reportWindowSize(){var e=window.innerWidth;1399<e&&calcZoom(initZoom,1440,e,5e-4),e<=1399&&961<=e&&calcZoom(initZoom,1440,e,7e-4),e<=960&&639<e&&calcZoom(initZoom=1,640,e,.0012),e<=639&&calcZoom(initZoom=1.5,639,e,.002)}function calcZoom(e,t,n,a){wrapperZoom.style.zoom=e-(t-n)*a}function initLayout(){var e=localStorage.getItem("lauout_pref"),t=document.querySelector(".setTable"),n=document.querySelector(".setGrid"),a=document.querySelector(".mainPage__layoutTable"),o=document.querySelector(".mainPage__layoutGrid");switch(e){case"table":t.classList.add("layoutContainer__buttonActive"),n.classList.remove("layoutContainer__buttonActive"),a.classList.add("mainPage__layoutActive"),o.classList.remove("mainPage__layoutActive");break;case"grid":n.classList.add("layoutContainer__buttonActive"),t.classList.remove("layoutContainer__buttonActive"),o.classList.add("mainPage__layoutActive"),a.classList.remove("mainPage__layoutActive");break;default:t.classList.add("layoutContainer__buttonActive"),n.classList.remove("layoutContainer__buttonActive"),a.classList.add("mainPage__layoutActive"),o.classList.remove("mainPage__layoutActive")}}function initCountTextareaValue(){var e=document.querySelector(".editContainer__formTextareaSymbolCounter"),t=document.querySelector(".editContainer__formTextarea");e.textContent=580-t.value.length,parseInt(e.textContent)<=50&&e.classList.add("lowSymbols"),parseInt(e.textContent)<=0&&e.classList.add("noSymbols")}function initFormInactive(){var e=document.querySelector(".editContainer__form"),t=e.querySelectorAll("input"),e=e.querySelectorAll("textarea");setFormInactive(t),setFormInactive(e)}function setFormInactive(e){e.forEach(function(e){e.setAttribute("readonly",!0),e.setAttribute("disabled",!0),e.setAttribute("placeholder","Пока тут пусто :("),e.classList.add("showModeActive")})}window.addEventListener("resize",reportWindowSize),document.addEventListener("DOMContentLoaded",reportWindowSize),document.querySelector("main").classList.contains("editPage")&&(commentTextarea=document.querySelector(".editContainer__formTextarea"),commentTextareaSymbolCounter=document.querySelector(".editContainer__formTextareaSymbolCounter"),maxValue=580,commentTextarea.addEventListener("input",function(){commentTextareaSymbolCounter.textContent=maxValue-commentTextarea.value.length,parseInt(commentTextareaSymbolCounter.textContent)<=50?(commentTextareaSymbolCounter.classList.add("lowSymbols"),commentTextareaSymbolCounter.classList.remove("noSymbols")):50<parseInt(commentTextareaSymbolCounter.textContent)&&(commentTextareaSymbolCounter.classList.remove("noSymbols"),commentTextareaSymbolCounter.classList.remove("lowSymbols")),parseInt(commentTextareaSymbolCounter.textContent)<=0&&(commentTextareaSymbolCounter.classList.remove("lowSymbols"),commentTextareaSymbolCounter.classList.add("noSymbols"))}),commentTextarea.addEventListener("keydown",function(e){var t=e.keyCode||e.charCode;parseInt(commentTextareaSymbolCounter.textContent)<=0&&8!==t&&46!==t&&e.preventDefault()})),document.querySelector("main").classList.contains("mainPage")&&(parentFilterContainer=document.querySelector(".mainPage__filterContainer"),filerDarkLayer=parentFilterContainer.querySelector(".filterContainer__darkLayer"),filterContainer=parentFilterContainer.querySelector(".filterContainer__filters"),closeFilterButton=parentFilterContainer.querySelector(".filterContainer__closeButton"),(openFilterButton=document.querySelector(".openFilters")).addEventListener("click",function(){parentFilterContainer.classList.remove("jsHidden"),setTimeout(function(){filerDarkLayer.classList.add("anim__fadeIn")},100),setTimeout(function(){filterContainer.classList.add("anim__translateIn")},200)}),closeFilterButton.addEventListener("click",function(){filterContainer.classList.remove("anim__translateIn"),setTimeout(function(){filerDarkLayer.classList.remove("anim__fadeIn")},200),setTimeout(function(){parentFilterContainer.classList.add("jsHidden")},300)}),filerDarkLayer.addEventListener("click",function(){filterContainer.classList.remove("anim__translateIn"),setTimeout(function(){filerDarkLayer.classList.remove("anim__fadeIn")},200),setTimeout(function(){parentFilterContainer.classList.add("jsHidden")},300)})),document.querySelector("main").classList.contains("mainPage")&&(setTableButton=document.querySelector(".setTable"),setGridButton=document.querySelector(".setGrid"),layoutTable=document.querySelector(".mainPage__layoutTable"),layoutGrid=document.querySelector(".mainPage__layoutGrid"),setTableButton.addEventListener("click",function(){setTableButton.classList.add("layoutContainer__buttonActive"),setGridButton.classList.remove("layoutContainer__buttonActive"),layoutTable.classList.add("mainPage__layoutActive"),layoutGrid.classList.remove("mainPage__layoutActive"),localStorage.setItem("lauout_pref","table")}),setGridButton.addEventListener("click",function(){setGridButton.classList.add("layoutContainer__buttonActive"),setTableButton.classList.remove("layoutContainer__buttonActive"),layoutGrid.classList.add("mainPage__layoutActive"),layoutTable.classList.remove("mainPage__layoutActive"),localStorage.setItem("lauout_pref","grid")})),window.addEventListener("load",function(){document.querySelector("main").classList.contains("mainPage")&&initLayout(),document.querySelector("main").classList.contains("editPage")&&(initFormInactive(),initCountTextareaValue())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJjb21tb24uanMiLCJlZGl0UGFnZS5qcyIsImZpbHRlci5qcyIsImxheW91dFRvZ2dsZXIuanMiLCJvbmxvYWQuanMiXSwibmFtZXMiOlsiY2xvc2VBcHBsaWVkRm9ybSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjbG9zZUFwcGxpZWRGb3JtQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRhcmtMYXllciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImlucHV0QXV0aG9yaXphdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXQiLCJzcGFuIiwidmFsdWUiLCJhZGRXYXJuaW5nRW1wdHlTcGFuIiwiYWRkIiwiaW5wdXRJRCIsImlkIiwicXVlcnlTZWxlY3RvciIsImNvbmNhdCIsImFwcGVuZENoaWxkIiwid2FybmluZ0VtcHR5U3BhbiIsImNyZWF0ZUVsZW1lbnQiLCJkZWxldGVXYXJuaW5nU3BhbnMiLCJpbnB1dExhYmVsIiwicmVtb3ZlIiwiJCIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwibmFtZSIsInZhbCIsInBob25lIiwiY29tcGFueSIsImFyZWEiLCJhamF4IiwidHlwZSIsInVybCIsImRhdGEiLCJhY3Rpb24iLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJodG1sIiwiY29tbWVudFRleHRhcmVhIiwiY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlciIsIm1heFZhbHVlIiwicGFyZW50RmlsdGVyQ29udGFpbmVyIiwiZmlsZXJEYXJrTGF5ZXIiLCJmaWx0ZXJDb250YWluZXIiLCJjbG9zZUZpbHRlckJ1dHRvbiIsIm9wZW5GaWx0ZXJCdXR0b24iLCJzZXRUYWJsZUJ1dHRvbiIsInNldEdyaWRCdXR0b24iLCJsYXlvdXRUYWJsZSIsImxheW91dEdyaWQiLCJ3cmFwcGVyWm9vbSIsImluaXRab29tIiwicmVwb3J0V2luZG93U2l6ZSIsImN1cnJlbnRXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJjYWxjWm9vbSIsImluaXRXaWR0aCIsInpvb21MZXZlbFBlclBpeGVsIiwic3R5bGUiLCJ6b29tIiwiaW5pdExheW91dCIsImxheW91dFByZWYiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaW5pdENvdW50VGV4dGFyZWFWYWx1ZSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwicGFyc2VJbnQiLCJpbml0Rm9ybUluYWN0aXZlIiwiZWRpdERhdGFGb3JtIiwiYWxsUGVyc29uYWxJbnB1dHMiLCJwZXJzb25hbFRleHRhcmVhIiwic2V0Rm9ybUluYWN0aXZlIiwibm9kZUxpc3QiLCJub2RlIiwic2V0QXR0cmlidXRlIiwiY29udGFpbnMiLCJldmVudCIsImtleSIsImtleUNvZGUiLCJjaGFyQ29kZSIsInNldFRpbWVvdXQiLCJzZXRJdGVtIl0sIm1hcHBpbmdzIjoiQUErQkEsU0FBQUEsbUJBQ0EsSUFBQUEsRUFBQUMsU0FBQUMsZUFBQSxrQkFBQSxFQUNBQyxFQUFBRixTQUFBQyxlQUNBLHdCQUNBLEVBQ0FGLEVBQUFJLGlCQUFBLFFBQUEsV0FDQUMsVUFBQUMsVUFBQUMsT0FBQSxZQUFBLENBQ0EsQ0FBQSxFQUNBSixFQUFBQyxpQkFBQSxRQUFBLFdBQ0FDLFVBQUFDLFVBQUFDLE9BQUEsWUFBQSxDQUNBLENBQUEsQ0FDQSxDQUVBLFNBQUFDLHFCQUNBUCxTQUFBUSxpQkFBQSxhQUFBLEVBQ0FDLFFBQUEsU0FBQUMsR0FDQSxJQUNBQyxFQURBRCxFQUFBRSxRQUNBRCxFQUFBRSxvQkFBQSxFQUNBSCxFQUFBTCxVQUFBUyxJQUFBLHFCQUFBLEVBQ0FDLEVBQUFMLEVBQUFNLEdBQ0FoQixTQUFBaUIsY0FBQSxRQUFBQyxPQUFBSCxFQUFBLEdBQUEsQ0FBQSxFQUNBSSxZQUFBUixDQUFBLEVBRUEsQ0FBQSxDQUNBLENBR0EsU0FBQUUsc0JBQ0EsSUFBQU8sRUFBQXBCLFNBQUFxQixjQUFBLE1BQUEsRUFFQSxPQURBRCxFQUFBZixVQUFBUyxJQUFBLGNBQUEsRUFDQU0sQ0FDQSxDQUVBLFNBQUFFLHFC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RUFBQVosVUFBQTRFLFNBQUEsVUFBQSxJQUNBUixpQkFBQSxFQUNBSix1QkFBQSxFQUVBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEFKQVgt0LfQsNC/0YDQvtGBINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjQuSDQvdCwINC/0L7Rh9GC0YMsINC60L7RgtC+0YDQsNGPINGD0LrQsNC30LDQvdCwINCyINCw0LTQvNC40L3QutC1INGB0LDQudGC0LBcbiQoZnVuY3Rpb24gKCkge1xuICAkKFwiI2FwcGx5Rm9ybVwiKS5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbmFtZSA9ICQoXCIjdXNlck5hbWVcIikudmFsKCk7XG4gICAgdmFyIHBob25lID0gJChcIiN1c2VyUGhvbmVcIikudmFsKCk7XG4gICAgdmFyIGNvbXBhbnkgPSAkKFwiI3VzZXJDb21wYW55XCIpLnZhbCgpO1xuICAgIHZhciBhcmVhID0gJChcIiN1c2VyQXJlYVwiKS52YWwoKTtcblxuICAgICQuYWpheCh7XG4gICAgICB0eXBlOiBcInBvc3RcIixcbiAgICAgIHVybDogXCIvd3AtYWRtaW4vYWRtaW4tYWpheC5waHBcIixcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYWN0aW9uOiBcImFqYXhfZm9ybVwiLFxuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBwaG9uZTogcGhvbmUsXG4gICAgICAgIGNvbXBhbnk6IGNvbXBhbnksXG4gICAgICAgIGFyZWE6IGFyZWEsXG4gICAgICB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICQoXCIuZGFyay1sYXllclwiKS5odG1sKHJlc3BvbnNlKTtcbiAgICAgICAgY2xvc2VBcHBsaWVkRm9ybSgpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG59KTtcbi8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INCy0YHQtSDQv9C+0LvRjyDQstCw0LbQvdGL0LUg0LfQsNC/0L7Qu9C90LXQvdGLXG4kKFwiLmZvcm0tYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBpbnB1dEF1dGhvcml6YXRpb24oKTtcbn0pO1xuLy8g0KLQsNC6INC60LDQuiDQvtC60L3QviDQv9C+0YHQu9C1INC+0YLQv9GA0LDQstC60Lgg0Y8g0LPQtdC90LXRgNC40YDRg9GOINGB0LDQvCwg0LzQvdC1INC90YPQttC90L4g0LXQs9C+INC30LDQutGA0YvQstCw0YLRjCwg0L/QvtGN0YLQvtC80YMg0YTRg9C90LrRhtC40Y8g0LLRi9C30YvQstCw0LXRgtGB0Y8sINC60L7Qs9C00LAg0YLQvtC70YzQutC+INC/0L7Rj9Cy0LvRj9C10YLRgdGPINC+0LrQvdC+XG5mdW5jdGlvbiBjbG9zZUFwcGxpZWRGb3JtKCkge1xuICBjb25zdCBjbG9zZUFwcGxpZWRGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZUFwcGxpZWRGb3JtXCIpO1xuICBjb25zdCBjbG9zZUFwcGxpZWRGb3JtQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgXCJjbG9zZUFwcGxpZWRGb3JtQnV0dG9uXCJcbiAgKTtcbiAgY2xvc2VBcHBsaWVkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGRhcmtMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbiAgfSk7XG4gIGNsb3NlQXBwbGllZEZvcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkYXJrTGF5ZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLS1oaWRkZW5cIik7XG4gIH0pO1xufVxuLy8g0KHQsNC80LAg0YTRg9C90LrRhtC40Y8g0L/RgNC+0LLQtdGA0LrQuCDQv9C+0LvQtdC5INC4INC00L7QsdCw0LLQu9C10L3QuNGPINC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdGL0YUg0YHQstC+0LnRgdGC0LIg0L/QvtC70Y5cbmZ1bmN0aW9uIGlucHV0QXV0aG9yaXphdGlvbigpIHtcbiAgY29uc3QgaW5wdXRzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm0taW5wdXRcIik7XG4gIGlucHV0c0FycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaWYgKCFpbnB1dC52YWx1ZSkge1xuICAgICAgY29uc3Qgc3BhbiA9IGFkZFdhcm5pbmdFbXB0eVNwYW4oKTtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJmb3JtLWlucHV0LS13YXJuaW5nXCIpO1xuICAgICAgY29uc3QgaW5wdXRJRCA9IGlucHV0LmlkO1xuICAgICAgY29uc3QgaW5wdXRMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtmb3I9JHtpbnB1dElEfV1gKTtcbiAgICAgIGlucHV0TGFiZWwuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgfVxuICB9KTtcbn1cblxuLy8g0J3QtSDRhdC+0YLQtdC7INC/0LXRgNC10LPRgNGD0LbQsNGC0Ywg0YTRg9C90LrRhtC40Y8g0L/RgNC+0LLQtdGA0LrQuCDQuCDQv9GA0L7Rh9C10LUsINC/0L7RjdGC0L7QvNGDINGB0L7Qt9C00LDQvdC40LUg0L7RgtC00LXQu9GM0L3QvtCz0L4g0YHQv9Cw0L3QsCDQstGL0L3QtdGBINC+0YLQtNC10LvRjNC90L5cbmZ1bmN0aW9uIGFkZFdhcm5pbmdFbXB0eVNwYW4oKSB7XG4gIGNvbnN0IHdhcm5pbmdFbXB0eVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgd2FybmluZ0VtcHR5U3Bhbi5jbGFzc0xpc3QuYWRkKFwiZW1wdHktLWlucHV0XCIpO1xuICByZXR1cm4gd2FybmluZ0VtcHR5U3Bhbjtcbn1cbi8vINCa0LDQuiDRgtC+0LvRjNC60L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINGA0LXRiNC40LvRgdGPINCy0LLQtdGB0YLQuCDQtNCw0L3QvdGL0LUsINC10YHQu9C4INCx0YvQu9C+INC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40LUg0Y8g0YPQtNCw0LvRj9GOINC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40Y8g0LLRgdGP0LrQuNC1XG5mdW5jdGlvbiBkZWxldGVXYXJuaW5nU3BhbnMoKSB7XG4gIGNvbnN0IGlucHV0c0FycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtLWlucHV0XCIpO1xuICBpbnB1dHNBcnJheS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dElEID0gaW5wdXQuaWQ7XG4gICAgICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2Zvcj0ke2lucHV0SUR9XWApO1xuICAgICAgaWYgKGlucHV0TGFiZWwucXVlcnlTZWxlY3RvcihcIi5lbXB0eS0taW5wdXRcIikpIHtcbiAgICAgICAgY29uc3QgY2VydGFpblNwYW4gPSBpbnB1dExhYmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZW1wdHktLWlucHV0XCIpO1xuICAgICAgICBjZXJ0YWluU3Bhbi5yZW1vdmUoKTtcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm0taW5wdXQtLXdhcm5pbmdcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5kZWxldGVXYXJuaW5nU3BhbnMoKTtcbiIsImNvbnN0IHdyYXBwZXJab29tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndyYXBwZXJab29tJyk7XG5sZXQgaW5pdFpvb20gPSAxO1xuXG5mdW5jdGlvbiByZXBvcnRXaW5kb3dTaXplKCkge1xuICAgIGNvbnN0IGN1cnJlbnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIGxldCBpbml0V2lkdGggPSAwO1xuICAgIGxldCB6b29tTGV2ZWxQZXJQaXhlbCA9IDA7XG4gICAgbGV0IHpvb21MZXZlbCA9IDA7XG5cbiAgICBpZiAoY3VycmVudFdpZHRoID4gMTM5OSkge1xuICAgICAgICBpbml0V2lkdGggPSAxNDQwO1xuICAgICAgICB6b29tTGV2ZWxQZXJQaXhlbCA9IDAuMDAwNTtcbiAgICAgICAgY2FsY1pvb20oaW5pdFpvb20sIGluaXRXaWR0aCwgY3VycmVudFdpZHRoLCB6b29tTGV2ZWxQZXJQaXhlbClcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRXaWR0aCA8PSAxMzk5ICYmIGN1cnJlbnRXaWR0aCA+PSA5NjEpIHtcbiAgICAgICAgem9vbUxldmVsUGVyUGl4ZWwgPSAwLjAwMDc7XG4gICAgICAgIGluaXRXaWR0aCA9IDE0NDA7XG4gICAgICAgIGNhbGNab29tKGluaXRab29tLCBpbml0V2lkdGgsIGN1cnJlbnRXaWR0aCwgem9vbUxldmVsUGVyUGl4ZWwpXG4gICAgfVxuICAgIGlmIChjdXJyZW50V2lkdGggPD0gOTYwICYmIGN1cnJlbnRXaWR0aCA+IDYzOSkge1xuICAgICAgICBpbml0Wm9vbSA9IDE7XG4gICAgICAgIHpvb21MZXZlbFBlclBpeGVsID0gMC4wMDEyO1xuICAgICAgICBpbml0V2lkdGggPSA2NDA7XG4gICAgICAgIGNhbGNab29tKGluaXRab29tLCBpbml0V2lkdGgsIGN1cnJlbnRXaWR0aCwgem9vbUxldmVsUGVyUGl4ZWwpXG4gICAgfVxuICAgIGlmIChjdXJyZW50V2lkdGggPD0gNjM5KSB7XG4gICAgICAgIGluaXRab29tID0gMS41O1xuICAgICAgICB6b29tTGV2ZWxQZXJQaXhlbCA9IDAuMDAyO1xuICAgICAgICBpbml0V2lkdGggPSA2Mzk7XG4gICAgICAgIGNhbGNab29tKGluaXRab29tLCBpbml0V2lkdGgsIGN1cnJlbnRXaWR0aCwgem9vbUxldmVsUGVyUGl4ZWwpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYWxjWm9vbShpbml0Wm9vbSwgaW5pdFdpZHRoLCBjdXJyZW50V2lkdGgsIHpvb21MZXZlbFBlclBpeGVsKSB7XG4gICAgbGV0IHpvb21MZXZlbCA9IGluaXRab29tIC0gKChpbml0V2lkdGggLSBjdXJyZW50V2lkdGgpICogem9vbUxldmVsUGVyUGl4ZWwpO1xuICAgIHdyYXBwZXJab29tLnN0eWxlLnpvb20gPSB6b29tTGV2ZWw7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXBvcnRXaW5kb3dTaXplKVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJlcG9ydFdpbmRvd1NpemUpXG5cbiIsImlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0UGFnZScpKSB7XG4gICAgLy8gVGV4dGFyZWEgTGltaXQgQ29udHJvbFxuXG4gICAgY29uc3QgY29tbWVudFRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXRDb250YWluZXJfX2Zvcm1UZXh0YXJlYScpO1xuICAgIGNvbnN0IGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdENvbnRhaW5lcl9fZm9ybVRleHRhcmVhU3ltYm9sQ291bnRlcicpO1xuICAgIGNvbnN0IG1heFZhbHVlID0gNTgwO1xuICAgIGNvbW1lbnRUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlci50ZXh0Q29udGVudCA9IG1heFZhbHVlIC0gY29tbWVudFRleHRhcmVhLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgaWYgKHBhcnNlSW50KGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIudGV4dENvbnRlbnQpIDw9IDUwKSB7XG4gICAgICAgICAgICBjb21tZW50VGV4dGFyZWFTeW1ib2xDb3VudGVyLmNsYXNzTGlzdC5hZGQoJ2xvd1N5bWJvbHMnKVxuICAgICAgICAgICAgY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlci5jbGFzc0xpc3QucmVtb3ZlKCdub1N5bWJvbHMnKVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIudGV4dENvbnRlbnQpID4gNTApIHtcbiAgICAgICAgICAgIGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIuY2xhc3NMaXN0LnJlbW92ZSgnbm9TeW1ib2xzJylcbiAgICAgICAgICAgIGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIuY2xhc3NMaXN0LnJlbW92ZSgnbG93U3ltYm9scycpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyc2VJbnQoY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlci50ZXh0Q29udGVudCkgPD0gMCkge1xuICAgICAgICAgICAgY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlci5jbGFzc0xpc3QucmVtb3ZlKCdsb3dTeW1ib2xzJylcbiAgICAgICAgICAgIGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIuY2xhc3NMaXN0LmFkZCgnbm9TeW1ib2xzJylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBjb21tZW50VGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LmNoYXJDb2RlO1xuICAgICAgICBpZiAocGFyc2VJbnQoY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlci50ZXh0Q29udGVudCkgPD0gMCkge1xuICAgICAgICAgICAgaWYgKGtleSAhPT0gOCAmJiBrZXkgIT09IDQ2KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn0iLCJpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmNsYXNzTGlzdC5jb250YWlucygnbWFpblBhZ2UnKSkge1xuICAgIGNvbnN0IHBhcmVudEZpbHRlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluUGFnZV9fZmlsdGVyQ29udGFpbmVyJyk7XG4gICAgY29uc3QgZmlsZXJEYXJrTGF5ZXIgPSBwYXJlbnRGaWx0ZXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZpbHRlckNvbnRhaW5lcl9fZGFya0xheWVyJyk7XG4gICAgY29uc3QgZmlsdGVyQ29udGFpbmVyID0gcGFyZW50RmlsdGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJDb250YWluZXJfX2ZpbHRlcnMnKTtcbiAgICBjb25zdCBjbG9zZUZpbHRlckJ1dHRvbiA9IHBhcmVudEZpbHRlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyQ29udGFpbmVyX19jbG9zZUJ1dHRvbicpO1xuXG4gICAgY29uc3Qgb3BlbkZpbHRlckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuRmlsdGVycycpO1xuXG4gICAgb3BlbkZpbHRlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcGFyZW50RmlsdGVyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2pzSGlkZGVuJylcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGZpbGVyRGFya0xheWVyLmNsYXNzTGlzdC5hZGQoJ2FuaW1fX2ZhZGVJbicpXG4gICAgICAgIH0sIDEwMClcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGZpbHRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbmltX190cmFuc2xhdGVJbicpXG4gICAgICAgIH0sIDIwMClcbiAgICB9KVxuXG4gICAgY2xvc2VGaWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGZpbHRlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltX190cmFuc2xhdGVJbicpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZmlsZXJEYXJrTGF5ZXIuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbV9fZmFkZUluJylcbiAgICAgICAgfSwgMjAwKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHBhcmVudEZpbHRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdqc0hpZGRlbicpXG4gICAgICAgIH0sIDMwMClcbiAgICB9KVxuXG4gICAgZmlsZXJEYXJrTGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGZpbHRlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltX190cmFuc2xhdGVJbicpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZmlsZXJEYXJrTGF5ZXIuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbV9fZmFkZUluJylcbiAgICAgICAgfSwgMjAwKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHBhcmVudEZpbHRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdqc0hpZGRlbicpXG4gICAgICAgIH0sIDMwMClcbiAgICB9KVxufSIsImlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdtYWluUGFnZScpKSB7XG4gICAgY29uc3Qgc2V0VGFibGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2V0VGFibGUnKTtcbiAgICBjb25zdCBzZXRHcmlkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldEdyaWQnKTtcbiAgICBjb25zdCBsYXlvdXRUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluUGFnZV9fbGF5b3V0VGFibGUnKVxuICAgIGNvbnN0IGxheW91dEdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpblBhZ2VfX2xheW91dEdyaWQnKVxuXG4gICAgc2V0VGFibGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHNldFRhYmxlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2xheW91dENvbnRhaW5lcl9fYnV0dG9uQWN0aXZlJylcbiAgICAgICAgc2V0R3JpZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdsYXlvdXRDb250YWluZXJfX2J1dHRvbkFjdGl2ZScpXG4gICAgICAgIGxheW91dFRhYmxlLmNsYXNzTGlzdC5hZGQoJ21haW5QYWdlX19sYXlvdXRBY3RpdmUnKVxuICAgICAgICBsYXlvdXRHcmlkLmNsYXNzTGlzdC5yZW1vdmUoJ21haW5QYWdlX19sYXlvdXRBY3RpdmUnKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGF1b3V0X3ByZWYnLCAndGFibGUnKVxuICAgIH0pXG5cbiAgICBzZXRHcmlkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBzZXRHcmlkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2xheW91dENvbnRhaW5lcl9fYnV0dG9uQWN0aXZlJylcbiAgICAgICAgc2V0VGFibGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnbGF5b3V0Q29udGFpbmVyX19idXR0b25BY3RpdmUnKVxuICAgICAgICBsYXlvdXRHcmlkLmNsYXNzTGlzdC5hZGQoJ21haW5QYWdlX19sYXlvdXRBY3RpdmUnKVxuICAgICAgICBsYXlvdXRUYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdtYWluUGFnZV9fbGF5b3V0QWN0aXZlJylcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xhdW91dF9wcmVmJywgJ2dyaWQnKVxuICAgIH0pXG59Iiwid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5jbGFzc0xpc3QuY29udGFpbnMoJ21haW5QYWdlJykpIHtcbiAgICAgICAgaW5pdExheW91dCgpXG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXRQYWdlJykpIHtcbiAgICAgICAgaW5pdEZvcm1JbmFjdGl2ZSgpXG4gICAgICAgIGluaXRDb3VudFRleHRhcmVhVmFsdWUoKVxuICAgIH1cbn0pXG5cbmZ1bmN0aW9uIGluaXRMYXlvdXQoKSB7XG4gICAgY29uc3QgbGF5b3V0UHJlZiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYXVvdXRfcHJlZicpO1xuICAgIGNvbnN0IHNldFRhYmxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldFRhYmxlJyk7XG4gICAgY29uc3Qgc2V0R3JpZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXRHcmlkJyk7XG4gICAgY29uc3QgbGF5b3V0VGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpblBhZ2VfX2xheW91dFRhYmxlJylcbiAgICBjb25zdCBsYXlvdXRHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW5QYWdlX19sYXlvdXRHcmlkJylcblxuICAgIHN3aXRjaCAobGF5b3V0UHJlZikge1xuICAgICAgICBjYXNlIFwidGFibGVcIjpcbiAgICAgICAgICAgIHNldFRhYmxlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2xheW91dENvbnRhaW5lcl9fYnV0dG9uQWN0aXZlJylcbiAgICAgICAgICAgIHNldEdyaWRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnbGF5b3V0Q29udGFpbmVyX19idXR0b25BY3RpdmUnKVxuICAgICAgICAgICAgbGF5b3V0VGFibGUuY2xhc3NMaXN0LmFkZCgnbWFpblBhZ2VfX2xheW91dEFjdGl2ZScpXG4gICAgICAgICAgICBsYXlvdXRHcmlkLmNsYXNzTGlzdC5yZW1vdmUoJ21haW5QYWdlX19sYXlvdXRBY3RpdmUnKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJncmlkXCI6XG4gICAgICAgICAgICBzZXRHcmlkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2xheW91dENvbnRhaW5lcl9fYnV0dG9uQWN0aXZlJylcbiAgICAgICAgICAgIHNldFRhYmxlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2xheW91dENvbnRhaW5lcl9fYnV0dG9uQWN0aXZlJylcbiAgICAgICAgICAgIGxheW91dEdyaWQuY2xhc3NMaXN0LmFkZCgnbWFpblBhZ2VfX2xheW91dEFjdGl2ZScpXG4gICAgICAgICAgICBsYXlvdXRUYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdtYWluUGFnZV9fbGF5b3V0QWN0aXZlJylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgc2V0VGFibGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbGF5b3V0Q29udGFpbmVyX19idXR0b25BY3RpdmUnKVxuICAgICAgICAgICAgc2V0R3JpZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdsYXlvdXRDb250YWluZXJfX2J1dHRvbkFjdGl2ZScpXG4gICAgICAgICAgICBsYXlvdXRUYWJsZS5jbGFzc0xpc3QuYWRkKCdtYWluUGFnZV9fbGF5b3V0QWN0aXZlJylcbiAgICAgICAgICAgIGxheW91dEdyaWQuY2xhc3NMaXN0LnJlbW92ZSgnbWFpblBhZ2VfX2xheW91dEFjdGl2ZScpXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRDb3VudFRleHRhcmVhVmFsdWUoKSB7XG4gICAgY29uc3QgY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0Q29udGFpbmVyX19mb3JtVGV4dGFyZWFTeW1ib2xDb3VudGVyJyk7XG4gICAgY29uc3QgY29tbWVudFRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXRDb250YWluZXJfX2Zvcm1UZXh0YXJlYScpO1xuICAgIGNvbnN0IG1heFZhbHVlID0gNTgwO1xuICAgIGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIudGV4dENvbnRlbnQgPSBtYXhWYWx1ZSAtIGNvbW1lbnRUZXh0YXJlYS52YWx1ZS5sZW5ndGg7XG4gICAgaWYgKHBhcnNlSW50KGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIudGV4dENvbnRlbnQpIDw9IDUwKSB7XG4gICAgICAgIGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIuY2xhc3NMaXN0LmFkZCgnbG93U3ltYm9scycpXG4gICAgfVxuXG4gICAgaWYgKHBhcnNlSW50KGNvbW1lbnRUZXh0YXJlYVN5bWJvbENvdW50ZXIudGV4dENvbnRlbnQpIDw9IDApIHtcbiAgICAgICAgY29tbWVudFRleHRhcmVhU3ltYm9sQ291bnRlci5jbGFzc0xpc3QuYWRkKCdub1N5bWJvbHMnKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdEZvcm1JbmFjdGl2ZSgpIHtcbiAgICBjb25zdCBlZGl0RGF0YUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdENvbnRhaW5lcl9fZm9ybScpO1xuICAgIGNvbnN0IGFsbFBlcnNvbmFsSW5wdXRzID0gZWRpdERhdGFGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgY29uc3QgcGVyc29uYWxUZXh0YXJlYSA9IGVkaXREYXRhRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuICAgIHNldEZvcm1JbmFjdGl2ZShhbGxQZXJzb25hbElucHV0cylcbiAgICBzZXRGb3JtSW5hY3RpdmUocGVyc29uYWxUZXh0YXJlYSlcbn1cblxuZnVuY3Rpb24gc2V0Rm9ybUluYWN0aXZlKG5vZGVMaXN0KSB7XG4gICAgbm9kZUxpc3QuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgdHJ1ZSk7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAn0J/QvtC60LAg0YLRg9GCINC/0YPRgdGC0L4gOignKVxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3Nob3dNb2RlQWN0aXZlJylcbiAgICB9KVxufSJdfQ==
